# 為程式碼評分

分析並評分 URL: {{1}} 相關的程式碼品質

## 評分步驟

0. 排除框架本身的設計
1. 從 controller 開始，追蹤該請求觸發的 service、model 等所有相關檔案和函數
2. 在路徑:/Users/neilchuang-mac/Documents/ratecode底下新建一份markdown檔案，檔案名稱可以用日期時間
2. 在markdown檔案中，根據下方評分方式，針對各方法給予每項指標分數，計算總分
3. 在markdown檔案中，列出評分範圍（檔案名稱、方法名稱、行數）
4. 在markdown檔案中，列出各指標得分和總分
5. 在markdown檔案中，根據優先級提供優化建議

## 評分框架

**每項指標滿分 20 分**
```
客觀基礎分數 + 主觀調整(-10 ~ +10) = 最終分數
```

### 1. 程式碼複雜度 (20分)

**客觀指標：**
- 方法行數 < 20行: +5分
- 方法行數 20-50行: +3分  
- 方法行數 50-100行: +1分
- 方法行數 > 100行: 0分
- 嵌套層級 < 3: +5分
- 嵌套層級 3-5: +3分
- 嵌套層級 > 5: 0分
- 有職責分離: +3分
- 使用設計模式: +2分

### 2. 錯誤處理機制 (20分)

**客觀指標：**
- 有 try-catch 區塊: +4分
- 錯誤訊息不洩露敏感資訊: +4分  
- 有統一錯誤處理機制: +4分
- 有錯誤記錄: +4分
- 有適當的錯誤回應: +4分

### 3. 安全性 (20分)

**客觀指標：**
- 有 SQL injection 防護: +5分
- 有 XSS 防護: +5分
- 有檔案上傳驗證: +3分  
- 沒有危險函數 (shell_exec等): +4分
- 有輸入驗證: +3分

### 4. 程式碼可讀性 (20分)

**客觀指標：**
- 有適當註解: +4分
- 變數命名清晰: +4分
- 方法名稱語義化: +4分
- 程式碼格式一致: +4分
- 邏輯結構清晰: +4分

### 5. 架構設計 (20分)

**客觀指標：**
- 遵循 MVC 架構: +4分
- 使用依賴注入: +3分
- 單一職責原則: +4分
- 有服務層分離: +4分
- 符合 SOLID 原則: +5分

## 評分等級

- A (90-100): 優秀
- B (80-89): 良好
- C (70-79): 及格  
- D (60-69): 不及格
- F (0-59): 嚴重問題

## 輸出格式

請按以下格式輸出評分結果：

1. **評分範圍**: 列出檔案和方法
2. **各指標得分**: 表格形式呈現
3. **總分和等級**: 明確結果
4. **優化建議**: 按優先級排序